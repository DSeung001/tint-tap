# Tint Tap Game Requirements Specification

## 문서 정보
- **프로젝트명**: Tint Tap
- **버전**: 1.0
- **작성일**: 2024
- **문서 유형**: 요구사항 명세서 (Software Requirements Specification)

---

## 1. 개요 (Overview)

### 1.1 프로젝트 소개
- **제목**: Tint Tap
- **장르**: 레트로 컬러 퍼즐 / 아케이드
- **핵심 컨셉**: 신중하게 다른 색을 찾아내는 레트로 감성 컬러 퍼즐 게임
- **대상 플랫폼**: Web (PC / Mobile 반응형)
- **플레이 스타일**: 느리지만 집중력을 요구하는 아케이드 퍼즐

### 1.2 목적
이 문서는 Tint Tap 게임의 기능 및 비기능 요구사항을 명확히 정의하여 개발팀과 이해관계자 간의 공통된 이해를 도모하고, 프로젝트 개발의 기준을 제공합니다.

---

## 2. 기능 요구사항 (Functional Requirements)

### 2.1 게임 플로우

#### REQ-001: 시작 화면
- **우선순위**: 높음 (★★★)
- **설명**: 게임 시작 전 타이틀 화면 표시
- **세부 요구사항**:
  - 타이틀 로고/텍스트 표시
  - "Start Game" 버튼 제공
  - 버튼 클릭 시 게임 시작

#### REQ-002: 레벨 로딩
- **우선순위**: 높음 (★★★)
- **설명**: 현재 레벨 설정에 따라 그리드 및 색상 생성
- **세부 요구사항**:
  - 레벨 번호에 따른 그리드 크기 자동 계산
  - RGB 차이값(Δ)에 따른 다른 색상 타일 생성
  - 다른 색상 타일 개수 설정에 따라 배치
  - 모든 타일 무작위 위치 배치

#### REQ-003: 타일 선택
- **우선순위**: 높음 (★★★)
- **설명**: 플레이어가 마우스/터치로 타일 선택
- **세부 요구사항**:
  - 복수 타일 선택 가능
  - 선택된 타일 시각적 피드백 제공
  - 선택 취소 가능

#### REQ-004: 답안 제출 및 판정
- **우선순위**: 높음 (★★★)
- **설명**: OK 버튼 클릭 시 선택된 타일 검증
- **세부 요구사항**:
  - OK 버튼 클릭 후 선택 타일 판정
  - 정답 시: 점수 계산 및 다음 레벨로 진행
  - 오답 시: 목숨 1개 차감, 현재 레벨 재시작 또는 게임 종료 처리

#### REQ-005: 점수 시스템
- **우선순위**: 높음 (★★★)
- **설명**: 레벨 클리어 시 점수 계산 및 표시
- **세부 요구사항**:
  - 기본 점수: 레벨별 기본값
  - 다른 색상 타일 보너스: `oddCount * perOddTileBonus`
  - 시간 보너스: 빠를수록 높은 보너스 (최대 cap 제한)
  - 총 점수: `score = base + (oddCount * perOddTileBonus) + timeBonus`
  - 실시간 점수 표시

#### REQ-006: 목숨 시스템
- **우선순위**: 높음 (★★★)
- **설명**: 게임 실패 시 목숨 감소
- **세부 요구사항**:
  - 초기 목숨: 3개
  - 오답 시 목숨 1개 차감
  - 목숨 0개 시 게임 종료
  - 목숨 상태 실시간 표시

#### REQ-007: 게임 종료
- **우선순위**: 중간 (★★☆)
- **설명**: 목숨 소진 시 게임 종료 화면 표시
- **세부 요구사항**:
  - 최종 점수 표시
  - 최고 점수 기록 비교 표시
  - "Restart" 버튼 제공
  - 점수 LocalStorage 저장

---

### 2.2 레벨 시스템

#### REQ-008: 레벨 난이도 설정
- **우선순위**: 높음 (★★★)
- **설명**: 레벨별 난이도 자동 조정
- **세부 요구사항**:

| 구간 | 레벨 범위 | RGB 차이(Δ) | 다른 색 타일 수 | 그리드 크기 |
|------|----------|-------------|----------------|-------------|
| 1 | 1~5 | Δ 100 → 85 | 1 | 3x3 |
| 2 | 6~10 | Δ 85 → 70 | 1 | 3x4 |
| 3 | 11~20 | Δ 70 → 30 (점진 감소) | 1 | 4x4 |
| 4 | 21~30 | Δ 30 → 20 | 2 | 5x5 |
| 5 | 31~40 | Δ 20 → 10 | 4 | 6x5 |

- 모든 수치는 선형 보간(Linear Interpolation) 기반
- 총 레벨 수: 40단계

#### REQ-009: 동적 난이도 계산
- **우선순위**: 중간 (★★☆)
- **설명**: 설정 파일 기반 난이도 계산 함수
- **세부 요구사항**:
  - `deltaFor(level)`: 레벨에 따른 RGB 차이값 반환
  - `oddCountFor(level)`: 레벨에 따른 다른 색상 타일 개수 반환
  - `gridFor(level)`: 레벨에 따른 그리드 크기 반환
  - 설정 파일 변경 시 재빌드 없이 반영

---

### 2.3 색상 시스템

#### REQ-010: 색상 생성 알고리즘
- **우선순위**: 높음 (★★★)
- **설명**: RGB 차이값 기반 다른 색상 생성
- **세부 요구사항**:
  - 기본 색상 랜덤 생성 (밝기 범위: 40~215)
  - 다른 색상은 기본 색상에서 Δ만큼 차이
  - RGB 채널별 자동 또는 수동 조정 가능
  - 색맹 안전 모드 옵션 (향후 확장)

---

### 2.4 사용자 인터페이스

#### REQ-011: 레트로 UI 스타일
- **우선순위**: 중간 (★★☆)
- **설명**: 레트로 감성의 사용자 인터페이스
- **세부 요구사항**:
  - 픽셀 폰트 사용
  - 도트 효과 및 레트로 색감
  - 명확한 OK 버튼 인터랙션
  - 반응형 디자인 (PC/Mobile 지원)

#### REQ-012: 게임 상태 표시
- **우선순위**: 높음 (★★★)
- **설명**: 실시간 게임 정보 표시
- **세부 요구사항**:
  - 현재 레벨 표시
  - 목숨 표시
  - 현재 점수 표시
  - 타이머 표시 (시간 보너스 계산용)

---

### 2.5 오디오 시스템

#### REQ-013: 효과음
- **우선순위**: 낮음 (★☆☆)
- **설명**: 게임 액션에 따른 효과음 재생
- **세부 요구사항**:
  - 타일 클릭 효과음
  - 정답 효과음
  - 오답 효과음
  - 버튼 클릭 효과음

---

## 3. 비기능 요구사항 (Non-Functional Requirements)

### 3.1 성능 요구사항

#### NREQ-001: 렌더링 성능
- **설명**: 60 FPS 유지
- **세부 요구사항**:
  - 렌더링 주기: 60Hz (config.json `tickHz` 설정)
  - 그리드 최대 크기(6x5)에서도 부드러운 렌더링

#### NREQ-002: 반응성
- **설명**: 사용자 입력에 즉각 반응
- **세부 요구사항**:
  - 타일 클릭 지연: < 100ms
  - 화면 전환 애니메이션: 부드러운 전환

---

### 3.2 호환성 요구사항

#### NREQ-003: 브라우저 호환성
- **설명**: 주요 브라우저 지원
- **세부 요구사항**:
  - Chrome, Firefox, Safari, Edge 최신 2개 버전
  - 모바일 브라우저 지원 (iOS Safari, Chrome Mobile)

#### NREQ-004: 디바이스 지원
- **설명**: 다양한 디바이스 지원
- **세부 요구사항**:
  - PC: 데스크톱 해상도 (최소 1280x720)
  - Mobile: 스마트폰 터치 인터페이스 지원

---

### 3.3 사용성 요구사항

#### NREQ-005: 직관적 조작
- **설명**: 누구나 쉽게 이해할 수 있는 UI/UX
- **세부 요구사항**:
  - 명확한 버튼 레이블
  - 시각적 피드백 제공
  - 오류 메시지 명확성

---

### 3.4 유지보수성 요구사항

#### NREQ-006: 설정 기반 동작
- **설명**: 모든 게임 로직은 설정 파일로 제어
- **세부 요구사항**:
  - 난이도 조정 시 코드 수정 불필요
  - 설정 변경 시 즉시 반영 (재빌드 불필요)

#### NREQ-007: 확장 가능성
- **설명**: 향후 기능 추가 용이
- **세부 요구사항**:
  - easing 함수 확장 가능
  - 테마/스킨 시스템 확장 가능
  - 색상 팔레트 확장 가능

---

## 4. 시스템 아키텍처 (System Architecture)

### 4.1 기술 스택

#### 기술 구성표

| 항목 | 기술 | 용도 |
|------|------|------|
| 프로그래밍 언어 | JavaScript (ES6+) | 핵심 게임 로직 |
| 렌더링 라이브러리 | PixiJS | Canvas 기반 2D 렌더링 |
| 오디오 라이브러리 | Howler.js | 효과음 재생 |
| 빌드 도구 | Vite | 개발 환경 및 빌드 |
| 배포 | GitHub Pages | 정적 웹 호스팅 |
| 데이터 저장소 | LocalStorage | 점수 기록 저장 |

### 4.2 게임 상태 관리

#### 상태 다이어그램

```
START → LEVEL_LOAD → PLAY → JUDGE → (정답: LEVEL_LOAD / 오답: GAME_OVER)
                                      ↓
                                   GAME_OVER → (Restart: START)
```

#### 상태 상세

1. **START**: 타이틀 화면, Start 버튼 표시
2. **LEVEL_LOAD**: 현재 레벨 설정 로드, 그리드 및 색상 생성
3. **PLAY**: 플레이어 타일 선택 대기
4. **JUDGE**: OK 버튼 클릭 후 답안 검증
   - 정답: 점수 계산 → 다음 레벨 (LEVEL_LOAD)
   - 오답: 목숨 차감 → 목숨 > 0이면 LEVEL_LOAD, 목숨 = 0이면 GAME_OVER
5. **GAME_OVER**: 최종 점수 표시, 재시작 옵션 제공

---

## 5. 데이터 구조 (Data Structures)

### 5.1 설정 파일 구조 (config.json)

```json
{
  "lives": 3,
  "scoring": {
    "basePerLevel": 100,
    "perOddTileBonus": 25,
    "timeBonus": {
      "enabled": true,
      "perSecond": 5,
      "cap": 300
    },
    "wrongPenalty": 0
  },
  "deltaSchedule": [
    { "range": [1, 20], "start": 100, "end": 30, "easing": "linear" },
    { "range": [21, 30], "start": 30, "end": 20, "easing": "linear" },
    { "range": [31, 40], "start": 20, "end": 10, "easing": "linear" }
  ],
  "oddTileSchedule": [
    { "range": [1, 20], "count": 1 },
    { "range": [21, 30], "count": 2 },
    { "range": [31, 40], "count": 4 }
  ],
  "gridSchedule": [
    { "range": [1, 5], "cols": 3, "rows": 3 },
    { "range": [6, 10], "cols": 3, "rows": 4 },
    { "range": [11, 20], "cols": 4, "rows": 4 },
    { "range": [21, 35], "cols": 5, "rows": 5 },
    { "range": [36, 40], "cols": 6, "rows": 5 }
  ],
  "timing": {
    "bonusClockPerLevelSec": 15,
    "tickHz": 60
  },
  "color": {
    "baseLumaClamp": [40, 215],
    "channelsToVary": "auto",
    "colorBlindSafe": false
  },
  "ui": {
    "retro": true,
    "confirmCommit": true
  }
}
```

### 5.2 설정 파일 필드 설명

#### lives
- **타입**: number
- **설명**: 게임 시작 시 목숨 개수

#### scoring
- **basePerLevel**: 레벨별 기본 점수
- **perOddTileBonus**: 다른 색상 타일 개수당 추가 점수
- **timeBonus**: 시간 보너스 설정
  - **enabled**: 시간 보너스 활성화 여부
  - **perSecond**: 초당 보너스 점수
  - **cap**: 최대 보너스 점수 상한
- **wrongPenalty**: 오답 시 감점 (현재 0)

#### deltaSchedule
- **타입**: Array
- **설명**: 레벨 범위별 RGB 차이값 스케줄
- **필드**:
  - **range**: [시작 레벨, 종료 레벨]
  - **start**: 범위 시작 시 RGB 차이값
  - **end**: 범위 종료 시 RGB 차이값
  - **easing**: 보간 방식 (현재 "linear")

#### oddTileSchedule
- **타입**: Array
- **설명**: 레벨 범위별 다른 색상 타일 개수

#### gridSchedule
- **타입**: Array
- **설명**: 레벨 범위별 그리드 크기
- **필드**:
  - **range**: [시작 레벨, 종료 레벨]
  - **cols**: 열 개수
  - **rows**: 행 개수

#### timing
- **bonusClockPerLevelSec**: 레벨당 보너스 계산 기준 시간(초)
- **tickHz**: 렌더링 주기 (Hz)

#### color
- **baseLumaClamp**: 기본 색상 밝기 범위 [최소, 최대]
- **channelsToVary**: RGB 채널 조정 방식 ("auto" 또는 "manual")
- **colorBlindSafe**: 색맹 안전 모드 활성화 여부

#### ui
- **retro**: 레트로 스타일 활성화
- **confirmCommit**: OK 버튼 확인 필요 여부

---

## 6. 기능 우선순위 요약

| 기능 ID | 기능명 | 우선순위 | 상태 |
|---------|--------|----------|------|
| REQ-001 | 시작 화면 | 높음 (★★★) | - |
| REQ-002 | 레벨 로딩 | 높음 (★★★) | - |
| REQ-003 | 타일 선택 | 높음 (★★★) | - |
| REQ-004 | 답안 제출 및 판정 | 높음 (★★★) | - |
| REQ-005 | 점수 시스템 | 높음 (★★★) | - |
| REQ-006 | 목숨 시스템 | 높음 (★★★) | - |
| REQ-007 | 게임 종료 | 중간 (★★☆) | - |
| REQ-008 | 레벨 난이도 설정 | 높음 (★★★) | - |
| REQ-009 | 동적 난이도 계산 | 중간 (★★☆) | - |
| REQ-010 | 색상 생성 알고리즘 | 높음 (★★★) | - |
| REQ-011 | 레트로 UI 스타일 | 중간 (★★☆) | - |
| REQ-012 | 게임 상태 표시 | 높음 (★★★) | - |
| REQ-013 | 효과음 | 낮음 (★☆☆) | - |

---

## 7. 향후 확장 계획 (Future Expansion)

### 7.1 예정 기능

- **REQ-101**: 전 세계 랭킹 API 연동 (Leaderboard)
- **REQ-102**: 일일 챌린지 모드
- **REQ-103**: 색맹 친화 모드 (Color-Blind Palette)
- **REQ-104**: 다양한 테마 스킨 추가 (네온, 도트 등)

---

## 8. 개발 참고사항 (Developer Notes)

### 8.1 설계 원칙

1. **설정 기반 동작**: 모든 난이도/색상 차이/그리드 설정은 `config.json` 기반으로 동작해야 함
2. **런타임 반영**: 코어 함수(`deltaFor`, `oddCountFor`, `gridFor`)는 설정 변경 시 재빌드 없이 반영되도록 구현
3. **확장성 고려**: easing 함수, stage theme, palette 등을 향후 확장 가능하도록 모듈화 설계

### 8.2 핵심 함수 명세

#### deltaFor(level: number): number
- **입력**: 레벨 번호
- **출력**: 해당 레벨의 RGB 차이값
- **로직**: `deltaSchedule` 배열을 순회하여 범위에 해당하는 레벨의 선형 보간값 반환

#### oddCountFor(level: number): number
- **입력**: 레벨 번호
- **출력**: 해당 레벨의 다른 색상 타일 개수
- **로직**: `oddTileSchedule` 배열에서 레벨 범위에 해당하는 count 값 반환

#### gridFor(level: number): { cols: number, rows: number }
- **입력**: 레벨 번호
- **출력**: 그리드 크기 객체
- **로직**: `gridSchedule` 배열에서 레벨 범위에 해당하는 cols, rows 반환

---

## 9. 용어 정의 (Glossary)

- **RGB Δ (Delta)**: 기본 색상과 다른 색상 간의 RGB 값 차이
- **Odd Tile**: 다른 색상을 가진 타일
- **Linear Interpolation**: 선형 보간, 두 값 사이를 균등하게 나누는 방식
- **Luma**: 색상의 밝기 (Luminance)

---

## 부록 (Appendix)

### A. 참고 자료
- PixiJS 공식 문서: https://pixijs.com/
- Howler.js 공식 문서: https://howlerjs.com/
- Vite 공식 문서: https://vitejs.dev/

---

**문서 종료**

*Tint Tap — 신중하게 다른 색을 찾아내는 레트로 감성 컬러 퍼즐*